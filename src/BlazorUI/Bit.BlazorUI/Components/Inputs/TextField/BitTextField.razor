@namespace Bit.BlazorUI
@inherits BitInputBase<string?>

<div @ref="RootElement" @attributes="HtmlAttributes"
     id="@UniqueId"
     style="@StyleBuilder.Value"
     class="@ClassBuilder.Value">
    <div style="@Styles?.InputWrapper" class="bit-txt-wrp @Classes?.InputWrapper">
        @if (LabelTemplate is not null)
        {
            <label id="@_labelId" for="@_inputId">
                @LabelTemplate
            </label>
        }
        else if (Label.HasValue())
        {
            <label style="@Styles?.Label @(_hasFocus ? Styles?.LabelFocus : "")"
                   class="bit-txt-lbl @Classes?.Label @(_hasFocus ? Classes?.LabelFocus : "")"
                   id="@_labelId"
                   for="@_inputId">
                @Label
            </label>
        }

        <div style="@Styles?.FieldGroup @(_hasFocus ? Styles?.FieldGroupFocus : "")"
             class="bit-txt-fgp @Classes?.FieldGroup  @(_hasFocus ? Classes?.FieldGroupFocus : "")">
            @if (PrefixTemplate is not null)
            {
                @PrefixTemplate
            }
            else if (Prefix.HasValue())
            {
                <div style="@Styles?.PrefixContainer @(_hasFocus ? Styles?.PrefixContainerFocus : "")"
                     class="bit-txt-pre @Classes?.PrefixContainer @(_hasFocus ? Classes?.PrefixContainerFocus : "")">
                    <span style="@Styles?.Prefix @(_hasFocus ? Styles?.PrefixFocus : "")"
                          class="@Classes?.Prefix @(_hasFocus ? Classes?.PrefixFocus : "")">
                        @Prefix
                    </span>
                </div>
            }

            @if (IsMultiline && Type == BitTextFieldType.Text)
            {
                <textarea id="@_inputId" @attributes="InputHtmlAttributes"
                          @ref="@_inputRef"
                          @onclick="@HandleOnClick"
                          @onkeyup="@HandleOnKeyUp"
                          @onfocus="@HandleOnFocus"
                          @oninput="@HandleOnChange"
                          @onchange="@HandleOnChange"
                          @onkeydown="@HandleOnKeyDown"
                          @onfocusin="@HandleOnFocusIn"
                          @onfocusout="@HandleOnFocusOut"
                          value="@CurrentValue"
                          style="@Styles?.Input @(_hasFocus ? Styles?.InputFocus : "")"
                          class="bit-txt-inp @Classes?.Input @(_hasFocus ? Classes?.InputFocus : "")"
                          disabled=@(IsEnabled is false)
                          rows="@Rows"
                          readonly=@IsReadonly
                          required=@IsRequired
                          maxlength="@MaxLength"
                          placeholder="@Placeholder"
                          aria-label="@AriaLabel"
                          aria-labelledby="@(Label.HasValue() || LabelTemplate is not null ? _labelId : null)"
                          aria-describedby="@(Description.HasValue() || DescriptionTemplate is not null ? _descriptionId : null)">
                    @CurrentValue
                </textarea>
            }
            else
            {
                <input id="@_inputId" @attributes="InputHtmlAttributes"
                       @ref="@_inputRef"
                       @onclick="@HandleOnClick"
                       @onfocus="@HandleOnFocus"
                       @onkeyup="@HandleOnKeyUp"
                       @oninput="@HandleOnChange"
                       @onchange="@HandleOnChange"
                       @onkeydown="@HandleOnKeyDown"
                       @onfocusin="@HandleOnFocusIn"
                       @onfocusout="@HandleOnFocusOut"
                       style="@Styles?.Input @(_hasFocus ? Styles?.InputFocus : "")"
                       class="bit-txt-inp @Classes?.Input @(_hasFocus ? Classes?.InputFocus : "")"
                       disabled=@(IsEnabled is false)
                       readonly=@IsReadonly
                       required=@IsRequired
                       type="@_inputType"
                       value="@CurrentValue"
                       maxlength="@MaxLength"
                       placeholder="@Placeholder"
                       autocomplete="@AutoComplete"
                       aria-label="@AriaLabel"
                       aria-labelledby="@(Label.HasValue() || LabelTemplate is not null ? _labelId : null)"
                       aria-describedby="@(Description.HasValue() || DescriptionTemplate is not null ? _descriptionId : null)" />
            }

            @if (CanRevealPassword && Type == BitTextFieldType.Password)
            {
                <button @onclick="ToggleRevealPassword"
                        style="@Styles?.RevealPassword @(_hasFocus ? Styles?.RevealPasswordFocus : "")"
                        class="bit-txt-prb @Classes?.RevealPassword @(_hasFocus ? Classes?.RevealPasswordFocus : "")"
                        type="button"
                        aria-label="@RevealPasswordAriaLabel"
                        aria-pressed="@(_elementType == BitTextFieldType.Text ? "true" : "false")">
                    <span style="@Styles?.RevealPasswordIconContainer" class="@Classes?.RevealPasswordIconContainer">
                        <i style="@Styles?.RevealPasswordIcon @(_hasFocus ? Styles?.RevealPasswordIconFocus : "")"
                           class="bit-icon bit-icon--@(_elementType == BitTextFieldType.Text ? "Hide3" : "View") @Classes?.RevealPasswordIcon @(_hasFocus ? Classes?.RevealPasswordIconFocus : "")"
                           aria-hidden="true" />
                    </span>
                </button>
            }

            @if (IconName.HasValue())
            {
                <i style="@Styles?.Icon @(_hasFocus ? Styles?.IconFocus : "")"
                   class="bit-icon bit-icon--@IconName @Classes?.Icon @(_hasFocus ? Classes?.IconFocus : "")"
                   aria-hidden="true" />
            }

            @if (SuffixTemplate is not null)
            {
                @SuffixTemplate
            }
            else if (Suffix.HasValue())
            {
                <div style="@Styles?.SuffixContainer @(_hasFocus ? Styles?.SuffixContainerFocus : "")"
                     class="bit-txt-suf @Classes?.SuffixContainer @(_hasFocus ? Classes?.SuffixContainerFocus : "")">
                    <span style="@Styles?.Suffix @(_hasFocus ? Styles?.SuffixFocus : "")"
                          class="@Classes?.Suffix @(_hasFocus ? Classes?.SuffixFocus : "")">
                        @Suffix
                    </span>
                </div>
            }

        </div>
    </div>
    @if (Description.HasValue() || DescriptionTemplate is not null)
    {
        <span style="@Styles?.DescriptionContainer @(_hasFocus ? Styles?.DescriptionContainerFocus : "")"
              class="bit-txt-des @Classes?.DescriptionContainer @(_hasFocus ? Classes?.DescriptionContainerFocus : "")"
              id="@_descriptionId">
            @if (DescriptionTemplate is not null)
            {
                @DescriptionTemplate
            }
            else if (Description.HasValue())
            {
                <span style="@Styles?.Description @(_hasFocus ? Styles?.DescriptionFocus : "")"
                      class="@Classes?.Description @(_hasFocus ? Classes?.DescriptionFocus : "")">
                    @Description
                </span>
            }
        </span>
    }
</div>