@attribute [Route(Urls.EditSystemPrompts)]
@attribute [Route("{culture?}" + Urls.EditSystemPrompts)]
@attribute [Authorize(Policy = AuthPolicies.PRIVILEGED_ACCESS)]
@inherits AppPageBase


<AppPageData Title="@Localizer[nameof(AppStrings.EditSystemPromptsTitle)]"
             SubTitle="@Localizer[nameof(AppStrings.EditSystemPromptsSubTitle)]" />

<CascadingValue Value=BitDir.Ltr>
    @if (isLoading)
    {
        <BitEllipsisLoading CustomSize="32" />
    }
    else
    {
        <BitButton IconName="@BitIconName.Save" IconOnly OnClick="WrapHandled(SaveChanges)" AutoLoading />

        <BitPivot>
            <BitPivotItem HeaderText="Support">
                <BitStack VerticalAlign="BitAlignment.Stretch" Horizontal>
                    <BitMarkdownEditor @bind-Value="systemPromptMarkdown" Style="height:auto" />
                    <BitMarkdownViewer Markdown="@systemPromptMarkdown" />
                </BitStack>
            </BitPivotItem>
            <BitPivotItem HeaderText="Summarize conversation context">
                <BitStack VerticalAlign="BitAlignment.Stretch" Horizontal>
                    <BitMarkdownEditor @bind-Value="summarizeConversationContextPrompt" Style="height:auto" />
                    <BitMarkdownViewer Markdown="@summarizeConversationContextPrompt" />
                </BitStack>
            </BitPivotItem>
        </BitPivot>
    }
</CascadingValue>