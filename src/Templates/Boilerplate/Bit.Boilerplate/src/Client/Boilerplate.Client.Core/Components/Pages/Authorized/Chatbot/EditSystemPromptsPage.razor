@attribute [Route(Urls.EditSystemPrompts)]
@attribute [Route("{culture?}" + Urls.EditSystemPrompts)]
@attribute [Authorize(Policy = AuthPolicies.PRIVILEGED_ACCESS)]
@inherits AppPageBase


<AppPageData Title="@Localizer[nameof(AppStrings.EditSystemPromptsTitle)]"
             SubTitle="@Localizer[nameof(AppStrings.EditSystemPromptsSubTitle)]" />

<CascadingValue Value=BitDir.Ltr>
    @if (isLoading)
    {
        <BitEllipsisLoading CustomSize="32" />
    }
    else
    {
        <BitButton IconName="@BitIconName.Save" IconOnly OnClick="WrapHandled(SaveChanges)" AutoLoading />

        <BitPivot>
            <BitPivotItem HeaderText="Support">
                <BitStack HorizontalAlign="BitAlignment.Stretch" VerticalAlign="BitAlignment.Stretch" Horizontal>
                    <BitStack Grows AutoHeight>
                        <BitMarkdownEditor @bind-Value=systemPromptMarkdown Style="overflow:auto" />
                    </BitStack>
                    <BitMarkdownViewer Markdown="@systemPromptMarkdown" Style="overflow:auto" />
                </BitStack>
            </BitPivotItem>
            <BitPivotItem HeaderText="Summarize conversation context">
                <BitStack HorizontalAlign="BitAlignment.Stretch" VerticalAlign="BitAlignment.Stretch" Horizontal>
                    <BitStack Grows AutoHeight>
                        <BitMarkdownEditor @bind-Value=summarizeConversationContextPrompt Style="overflow:auto" />
                    </BitStack>
                    <BitMarkdownViewer Markdown="@summarizeConversationContextPrompt" Style="overflow:auto" />
                </BitStack>
            </BitPivotItem>
        </BitPivot>
    }
</CascadingValue>