@attribute [Route(Urls.SystemPrompts)]
@attribute [Route("{culture?}" + Urls.SystemPrompts)]
@inherits AppPageBase


<AppPageData Title="@Localizer[nameof(AppStrings.SystemPromptsTitle)]"
             SubTitle="@Localizer[nameof(AppStrings.SystemPromptsSubTitle)]" />

<CascadingValue Value=BitDir.Ltr>
    @if (isLoading)
    {
        <BitEllipsisLoading CustomSize="32" />
    }
    else
    {
        <AuthorizeView Roles="@AppRoles.SUPER_ADMIN">
            <Authorized>
                <BitButton IconName="@BitIconName.Save" IconOnly OnClick="WrapHandled(SaveChanges)" AutoLoading />
            </Authorized>
            <NotAuthorized>
                <BitText Typography="BitTypography.H4" Color="BitColor.Warning">You don't have access to change these system prompts.</BitText>
            </NotAuthorized>
        </AuthorizeView>
        
        <BitStack VerticalAlign="BitAlignment.Stretch" Horizontal>
            <AuthorizeView>
                <BitMarkdownEditor @bind-Value="systemPromptMarkdown" Style="height:auto" />
            </AuthorizeView>
            <BitMarkdownViewer Markdown="@systemPromptMarkdown" />
        </BitStack>
    }
</CascadingValue>