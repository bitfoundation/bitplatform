@page "/pricing"

<div class="page-container">
    <section class="page-section main-section">
        <div class="page-section-contnet">
            <h1 class="page-main-title">Pricing</h1>
            <div class="page-desc">
                <span class="bold-txt">Bit platform Community is truly free and open source.</span> When you require more, you may choose a package that fits your needs.
            </div>
        </div>
    </section>

    <section class="page-section mid-section">
        <div class="page-section-contnet">
            <div class="mid-container">
                <div class="mid-value">Get the features and support you need today!</div>
                <div class="mid-name">Easily upgrade as your needs grow.</div>
            </div>
        </div>
    </section>

    <section class="page-section plans-section">
        <div class="page-section-contnet">
            <div class="card-list">
                @foreach (var package in SupportPackageList)
                {
                    <div class="plan-card">
                        <div>
                            <div class="plan-card-title">
                                @package.Title
                            </div>
                            @if (package.Title is not "Custom")
                            {
                                <div class="plan-card-subtitle">
                                    $@package.Price<span class="grey-txt">/@package.Period</span>
                                </div>
                            }
                            <div class="plan-card-desc">
                                @package.Description
                            </div>
                        </div>
                        @if (package.Title is not "Free")
                        {
                            <BitButton OnClick=@(() => SelectPackage(package))>Get the package</BitButton>
                        }
                    </div>
                }
            </div>
        </div>
    </section>

    <BitModal IsOpen=@IsBuyModalOpen>
        <EditForm Model="BuyPackageModel" OnValidSubmit="SendMessage" class="form">
            <DataAnnotationsValidator />

            <h2 class="form-title">Buy <span class="blue-txt">@SelectedPackage.Title</span> Pacakge</h2>
            @if (SelectedPackage.Title is not "Custom")
            {
                <div class="package-name">
                    $@SelectedPackage.Price<span class="grey-txt">/@SelectedPackage.Period</span>
                </div>
            }
            <BitIconButton OnClick=@CloseModal IconName="BitIconName.ChromeClose"/>
            <BitTextField @bind-Value="@BuyPackageModel.Email"
                          Type="BitTextFieldType.Email"
                          Label="Email"
                          IsRequired=true
                          HasBorder=true
                          Placeholder="Enter your email address" />
            <ValidationMessage For="() => BuyPackageModel.Email" />

            <BitTextField @bind-Value="@BuyPackageModel.Message"
                          Type="BitTextFieldType.Text"
                          Label="Message"
                          HasBorder=true
                          IsMultiline=true
                          Placeholder="Enter your message" />
            <ValidationMessage For="() => BuyPackageModel.Message" />
            <BitButton ButtonType="BitButtonType.Submit" IsEnabled="IsSubmitButtonEnabled">
                @if (IsLoading)
                {
                    <BitSpinner Size="BitSpinnerSize.Small"></BitSpinner>
                }
                else
                {
                    <span>Buy</span>
                }
            </BitButton>
        </EditForm>
    </BitModal>
</div>