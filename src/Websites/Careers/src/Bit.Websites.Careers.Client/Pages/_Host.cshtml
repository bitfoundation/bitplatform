@page "/"
@using Bit.Websites.Careers.Client;
@using Bit.Websites.Careers.Shared.Infra;
@namespace Bit.Websites.Careers.Client.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
    var isBlazorServer = BlazorModeDetector.Current.IsBlazorServer();
    var isDefaultDeploymentType = WebAppDeploymentTypeDetector.Current.IsDefault();
    var isStatic = WebAppDeploymentTypeDetector.Current.IsStatic();
    RenderMode renderMode = isStatic
                            ? RenderMode.Static
                            : isBlazorServer
                            ? isDefaultDeploymentType
                            ? RenderMode.Server
                            : RenderMode.ServerPrerendered
                            : isDefaultDeploymentType
                            ? RenderMode.WebAssembly
                            : RenderMode.WebAssemblyPrerendered;

    if (renderMode is RenderMode.ServerPrerendered or RenderMode.WebAssemblyPrerendered)
    {
        if (Request.ShouldRenderStaticMode())
        {
            renderMode = RenderMode.Static;
        }
    }
}

<component type="typeof(App)" render-mode="@renderMode" />
